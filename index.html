<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>HR Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
/* ===== THEME ===== */
:root{
 --bg:#f4f6f9;
 --card:#ffffff;
 --text:#222;
 --primary:#1976d2;
 --shadow:0 -6px 20px rgba(0,0,0,.08),0 12px 30px rgba(0,0,0,.18);
}
body.dark{
 --bg:#0f0f0f;
 --card:#1c1c1c;
 --text:#eee;
 --primary:#64b5f6;
}
body{
 margin:0;
 font-family:Segoe UI;
 background:var(--bg);
 color:var(--text);
 direction:rtl;
 overflow:hidden;
}

/* ===== BACKGROUND ===== */
.bg{position:fixed;inset:0;z-index:0;pointer-events:none}
.stars{
 position:absolute;width:200%;height:200%;
 background:url('https://i.imgur.com/9yG8g.gif');
 opacity:.12;animation:spin 200s linear infinite;
}
.glow{
 position:absolute;width:500px;height:500px;
 top:50%;left:50%;
 transform:translate(-50%,-50%);
 background:radial-gradient(circle,rgba(0,191,255,.45),transparent 70%);
 filter:blur(70px);animation:pulse 15s ease-in-out infinite;
}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{opacity:.4}50%{opacity:.8}}

/* ===== LOGIN ===== */
.login{
 position:relative;z-index:2;
 max-width:420px;margin:90px auto;
 background:var(--card);padding:35px;
 border-radius:22px;box-shadow:var(--shadow);
 text-align:center;
}
.login img{width:120px;margin-bottom:15px}
.login input{
 width:100%;padding:14px;margin:10px 0;
 border-radius:14px;border:1px solid #ccc
}
.login button{
 width:100%;padding:14px;
 border-radius:16px;border:0;
 background:var(--primary);color:#fff
}
.msg{color:red;font-weight:bold}

/* ===== DASHBOARD ===== */
.dashboard{display:none;position:relative;z-index:2;height:100vh;overflow:auto;padding:25px}
.top{display:flex;justify-content:space-between;gap:15px;flex-wrap:wrap}
.user-info{display:flex;gap:15px;flex-wrap:wrap}
.info-card{
 background:var(--card);padding:14px 18px;
 border-radius:18px;box-shadow:var(--shadow)
}
.pages{
 display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
 gap:20px;margin-top:30px
}
.page{
 background:var(--card);padding:24px;
 border-radius:22px;box-shadow:var(--shadow);
 text-align:center;cursor:pointer;transition:.3s
}
.page:hover{background:var(--primary);color:#fff;transform:translateY(-6px)}
.section{grid-column:1/-1;color:var(--primary);font-size:18px;margin-top:20px}
</style>
</head>

<body>

<div class="bg">
 <div class="stars"></div>
 <div class="glow"></div>
</div>

<div class="login" id="loginBox">
<img src="https://lh3.googleusercontent.com/pw/AP1GczMiRkDmMrZOPEMglikz95yOdSkrhKpx46bQE-TsNpqt8Cc-zZ53W7zBe3vVum7ljY-ynEQB8PIlpgmDjkrfSIv5JG-j1qGCNS-uk_iGnmMaql_MuCwKC7F4G7gd1Hn4GRWdyJ0L9HYHt4HLpnTtMQxH=w2499-h1214-s-no-gm">
<h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
<input id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
<input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
<div class="msg" id="msg"></div>
</div>

<div class="dashboard" id="dashboard">
 <div class="top">
  <div class="user-info" id="info"></div>
  <button onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
 </div>
 <div class="pages" id="pages"></div>
</div>

<script>
const DB="https://hr-mange-1ec00-default-rtdb.firebaseio.com";
let currentUser=null;

function login(){
 msg.innerHTML="";
 fetch(DB+"/USAR.json")
 .then(r=>r.json())
 .then(d=>{
  for(const id in d){
   if(d[id].username===username.value && d[id].password===password.value){
    currentUser={...d[id],_id:id};
    localStorage.setItem("session",JSON.stringify(currentUser));
    loadDashboard();return;
   }
  }
  msg.innerHTML="âŒ Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©";
 });
}

function loadDashboard(){
 loginBox.style.display="none";
 dashboard.style.display="block";
 info.innerHTML=`
  <div class="info-card">ğŸ‘¤ ${currentUser.username}</div>
  <div class="info-card">ğŸ‘” ${currentUser.managerName}</div>
  <div class="info-card">ğŸ¢ ${currentUser.branchName}</div>`;
 loadPages();
}

function loadPages(){
 fetch(DB+"/Pages.json").then(r=>r.json()).then(data=>{
  pages.innerHTML="";
  for(const s in data){
   let has=false,list="";
   for(const p in data[s].items){
    const key=(data[s].title||s)+"|"+(data[s].items[p].name||p);
    if(currentUser.pages?.[key]){
     has=true;
     list+=`<div class="page" onclick="location.href='${data[s].items[p].url}'">${data[s].items[p].name}</div>`;
    }
   }
   if(has) pages.innerHTML+=`<div class="section">${data[s].title||s}</div>`+list;
  }
 });
}

function logout(){
 localStorage.clear();
 dashboard.style.display="none";
 loginBox.style.display="block";
}

const s=localStorage.getItem("session");
if(s){currentUser=JSON.parse(s);loadDashboard();}
</script>

</body>
</html>
